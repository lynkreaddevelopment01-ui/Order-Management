<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Place Your Order | Medical Order Management</title>
    <meta name="description" content="Place your medical supply order quickly and easily">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/customer.css">
</head>

<body>

    <!-- LOGIN VIEW -->
    <div id="loginView">
        <div class="customer-login-page">
            <div class="login-card fade-in-up">
                <div class="login-logo">üè•</div>
                <h1>Medical Orders</h1>

                <div class="login-tabs">
                    <button class="tab-btn active" id="customerTab" onclick="switchTab('customer')">Customer</button>
                    <button class="tab-btn" id="adminTab" onclick="switchTab('admin')">Admin</button>
                </div>

                <!-- Customer Form -->
                <div id="customerFormSection">
                    <p class="login-sub">Enter your Customer ID to place an order</p>
                    <form id="customerLoginForm">
                        <div class="form-group" style="text-align:left;">
                            <label class="form-label" for="custId">Customer ID</label>
                            <input type="text" class="form-control" id="custId" name="customerId"
                                placeholder="Enter your registered Customer ID" required>
                        </div>
                        <div id="custLoginError"
                            style="color: var(--danger-500); font-size: 0.85rem; margin-bottom: 10px; display: none;">
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg" id="custLoginBtn" style="width: 100%;">
                            Continue ‚Üí
                        </button>
                    </form>
                </div>

                <!-- Admin Form -->
                <div id="adminFormSection" style="display: none;">
                    <p class="login-sub">Admin Login for this vendor</p>
                    <form id="adminLoginForm">
                        <div class="form-group" style="text-align:left;">
                            <label class="form-label" for="admin_username">Username</label>
                            <input type="text" class="form-control" id="admin_username" name="username"
                                placeholder="Admin username" required autocomplete="username">
                        </div>
                        <div class="form-group" style="text-align:left;">
                            <label class="form-label" for="admin_password">Password</label>
                            <input type="password" class="form-control" id="admin_password" name="password"
                                placeholder="Admin password" required autocomplete="current-password">
                        </div>
                        <div id="adminLoginError"
                            style="color: var(--danger-500); font-size: 0.85rem; margin-bottom: 10px; display: none;">
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg" id="adminLoginBtn" style="width: 100%;">
                            Sign In
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ORDER VIEW -->
    <div id="orderView" style="display: none;">
        <div class="order-page">
            <!-- Header Section with Profile -->
            <div class="order-header">
                <div class="order-topbar" style="background:none;box-shadow:none;">
                    <div>
                        <h2 style="font-weight: 800; letter-spacing: -0.01em;">üè• Medical Orders</h2>
                    </div>
                    <div style="display:flex;align-items:center;gap:12px;">
                        <button class="btn btn-ghost btn-sm" style="color:white;border:1px solid rgba(255,255,255,0.3);"
                            onclick="showHistory()">üìã My Orders</button>
                        <button class="btn btn-ghost btn-sm" style="color:white;border:1px solid rgba(255,255,255,0.3);"
                            onclick="customerLogout()">Exit</button>
                    </div>
                </div>

                <div class="customer-profile-card">
                    <div class="profile-row">
                        <div class="profile-icon">üë§</div>
                        <div class="profile-label">Name</div>
                        <div id="displayCustName" class="profile-value" style="font-size:1.15rem;font-weight:700;">
                            Customer</div>
                    </div>
                    <div class="profile-row">
                        <div class="profile-icon">üìû</div>
                        <div class="profile-label">Phone</div>
                        <div id="displayCustPhone" class="profile-value">9876543210</div>
                    </div>
                    <div class="profile-row">
                        <div class="profile-icon">üìç</div>
                        <div class="profile-label">Address</div>
                        <div id="displayCustAddress" class="profile-value">123 Street, City</div>
                    </div>
                </div>
            </div>

            <!-- Stock List & Search Container -->
            <div class="portal-container">
                <!-- Integrated Search -->
                <div class="stock-search-bar"
                    style="border-radius: 14px; margin: 24px 0; box-shadow: var(--shadow-sm); border: 1px solid var(--neutral-200);">
                    <div class="search-bar" style="max-width:100%; margin:0;">
                        <span class="search-icon">üîç</span>
                        <input type="text" class="form-control"
                            placeholder="Search manufacturers or medical supplies..." oninput="filterItems(this.value)"
                            id="itemSearchInput">
                    </div>
                </div>

                <!-- Dedicated area for manual requests, always below search -->
                <div id="manualRequestsArea"></div>

                <div class="stock-list" id="stockListArea" style="padding-bottom: 120px;">
                    <!-- Items rendered here -->
                </div>

            </div>

            <!-- Sticky Bottom Summary Bar -->
            <div class="order-summary-bar" id="orderSummaryBar">
                <div style="display:flex; flex-direction:column;">
                    <span id="cartItemCount" style="font-weight:800; color:var(--primary-700); font-size:1.1rem;">0
                        items</span>
                    <span
                        style="font-size:0.7rem; color:var(--text-muted); text-transform:uppercase; font-weight:700;">Ready
                        to ship</span>
                </div>
                <button class="btn btn-primary btn-lg" onclick="submitOrder()" id="submitOrderBtn"
                    style="padding: 12px 32px; border-radius:12px; font-weight:700; box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);">
                    Place Order ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- Order Success Overlay -->
    <div id="orderSuccessOverlay" style="display: none;"></div>

    <!-- Order History Modal -->
    <div class="modal-overlay" id="historyModal" style="z-index: 2000;">
        <div class="modal" style="max-width:520px;">
            <div class="modal-header">
                <h3>My Orders</h3>
                <button class="modal-close"
                    onclick="document.getElementById('historyModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body" id="historyContent" style="padding:0;">
                <!-- History items -->
            </div>
        </div>
    </div>

    <!-- Order Detail Modal (Secondary Popup) -->
    <div class="modal-overlay" id="orderDetailModal" style="z-index: 3000;">
        <div class="modal"
            style="max-width:560px; transform: scale(0.95); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);">
            <div class="modal-header">
                <div>
                    <h3 id="detailOrderNumber">Order Details</h3>
                    <div id="detailOrderDate" style="font-size: 0.75rem; color: var(--text-muted); margin-top: 2px;">
                    </div>
                </div>
                <button class="modal-close"
                    onclick="document.getElementById('orderDetailModal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div class="history-item-details" style="margin-top:0; border:none;">
                    <div id="detailItemsList">
                        <!-- Detail items here -->
                    </div>
                </div>
                <div id="detailOrderNotes" class="order-history-footer" style="display:none;">
                </div>
            </div>
        </div>
    </div>

    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="/js/customer/core.js"></script>
    <script src="/js/customer/auth.js"></script>
    <script src="/js/customer/stock.js"></script>
    <script src="/js/customer/orders.js"></script>
</body>

</html>